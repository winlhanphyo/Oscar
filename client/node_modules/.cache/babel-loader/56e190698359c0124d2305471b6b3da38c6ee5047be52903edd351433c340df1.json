{"ast":null,"code":"var _jsxFileName = \"/Users/winlhanphyo/Orion/Oscar/Oscar/client/src/pages/ForgetPassword/ForgetPassword.js\",\n  _s = $RefreshSig$();\nimport React, { Fragment } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Button, Form } from 'react-bootstrap';\nimport { useDispatch } from \"react-redux\";\nimport styles from './ForgetPassword.module.scss';\nimport axios from \"../../axios/index\";\nimport LoadingSpinner from '../../components/LoadingSpinner/LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ForgetPassword = () => {\n  _s();\n  const [loading, setLoading] = React.useState(false);\n  const [formData, setFormData] = React.useState({\n    email: ''\n  });\n  const [disabledLoginBtn, setDisabledLoginBtn] = React.useState(true);\n  const [errorForm, setErrorForm] = React.useState({\n    email: ''\n  });\n  const history = useHistory();\n  const dispatch = useDispatch();\n  let validation = (value, name) => {\n    if (name == 'email') {\n      if (!value) {\n        return 'Email is required';\n      } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n        return 'Email Format is required';\n      }\n      return '';\n    }\n  };\n\n  /**\n   * handle textbox change register button disabled enabled.\n   */\n  const handleChange = event => {\n    const name = event.target.name;\n    const value = event.target.value;\n    let preFormData = formData;\n    preFormData[name] = value;\n    setFormData({\n      ...preFormData\n    });\n    const error = validation(value, name);\n    let preErrorForm = errorForm;\n    if (!error) {\n      preErrorForm[name] = error;\n      setErrorForm({\n        ...preErrorForm\n      });\n    }\n    if (!error && formData.email) {\n      setDisabledLoginBtn(false);\n    } else {\n      setDisabledLoginBtn(true);\n    }\n  };\n  const handleBlur = event => {\n    const name = event.target.name;\n    const value = event.target.value;\n    const error = validation(value, name);\n    let preErrorForm = errorForm;\n    if (error) {\n      preErrorForm[name] = error;\n      setErrorForm({\n        ...preErrorForm\n      });\n    }\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    setDisabledLoginBtn(true);\n    setLoading(true);\n    if (formData) {\n      axios.post('/forget-password', formData).then(response => {\n        setDisabledLoginBtn(false);\n        setLoading(false);\n        if (response.status === 200) {\n          alert('Reset Password Link was successfully sent to your email.');\n        }\n      }).catch(error => {\n        setDisabledLoginBtn(false);\n        setLoading(false);\n        if (error.response.status === 422) {\n          alert('Email does not exist! Please try again.');\n          setFormData({\n            email: ''\n          });\n        }\n      });\n    } else {\n      alert('Email is wrong');\n    }\n\n    // axios.post(\"auth/login\", formData)\n    // .then((res) => {\n    //   const { data } = res;\n    //   const { token } = data.success;\n    //   const { user } = data;\n\n    //   /** store logged in user's info to local storage */\n    //   localStorage.setItem(\n    //     \"user\",\n    //     JSON.stringify({\n    //       accessToken: token,\n    //       ...user\n    //     })\n    //   );\n\n    //   /** store logged in user's info to App State */\n    //   dispatch({\n    //     type: LOGIN_SUCCESS,\n    //     payload: {\n    //       user: {\n    //         accessToken: token,\n    //         ...user\n    //       },\n    //     }\n    //   });\n    // })\n    // .then(() => navigate('/home'))\n    // .catch((error) => {\n    //   if (error.response) {\n    //     console.error(error.response.data);\n    //     // if (error.response.data.errors) {\n    //     //   this.setState({\n    //     //     errors: error.response.data.errors\n    //     //   });\n    //     // }\n    //   }\n    // });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      autoPlay: true,\n      loop: true,\n      muted: true,\n      className: loading ? styles.backdrop + ' shadow ' + styles.videoBg : styles.videoBg,\n      children: /*#__PURE__*/_jsxDEV(\"source\", {\n        src: \"../../../login/phone_using.mp4\",\n        type: \"video/mp4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      text: \"Sending email... \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: loading ? styles.container + ' shadow ' + styles.backdrop : styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.forgetPasswordTtl,\n        children: \"Forgot your password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formBasicEmail\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            required: true,\n            name: \"email\",\n            type: \"email\",\n            placeholder: \"Email\",\n            value: formData.email,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            className: styles.formControl,\n            isValid: !errorForm.email,\n            isInvalid: errorForm.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), errorForm.email ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger mt-4\",\n            children: errorForm.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this) : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-around mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            disabled: disabledLoginBtn,\n            type: \"submit\",\n            className: styles.forgetBtn,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-around mt-3\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/admin/login\",\n            className: styles.backToLogin,\n            children: \"Back to Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(ForgetPassword, \"LVJ0rxrj9UIrATjqk3ETkFloW2g=\", false, function () {\n  return [useHistory, useDispatch];\n});\n_c = ForgetPassword;\nexport default ForgetPassword;\nvar _c;\n$RefreshReg$(_c, \"ForgetPassword\");","map":{"version":3,"names":["React","Fragment","useHistory","Button","Form","useDispatch","styles","axios","LoadingSpinner","ForgetPassword","loading","setLoading","useState","formData","setFormData","email","disabledLoginBtn","setDisabledLoginBtn","errorForm","setErrorForm","history","dispatch","validation","value","name","test","handleChange","event","target","preFormData","error","preErrorForm","handleBlur","handleSubmit","preventDefault","post","then","response","status","alert","catch","backdrop","videoBg","container","forgetPasswordTtl","formControl","forgetBtn","backToLogin"],"sources":["/Users/winlhanphyo/Orion/Oscar/Oscar/client/src/pages/ForgetPassword/ForgetPassword.js"],"sourcesContent":["import React, { Fragment } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {Button, Form } from 'react-bootstrap';\nimport { useDispatch } from \"react-redux\";\nimport styles from './ForgetPassword.module.scss';\nimport axios from \"../../axios/index\";\nimport LoadingSpinner from '../../components/LoadingSpinner/LoadingSpinner';\n\nconst ForgetPassword = () => {\n  const [loading, setLoading] = React.useState(false);\n  const [formData, setFormData] = React.useState({\n    email: '',\n  });\n  const [disabledLoginBtn, setDisabledLoginBtn] = React.useState(true);\n  const [errorForm, setErrorForm] = React.useState({\n    email: '',\n  });\n  const history = useHistory();\n  const dispatch = useDispatch();\n  let validation = (value, name)=>{\n    if(name == 'email'){\n      if(!value){\n        return 'Email is required';\n      }else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)){\n        return 'Email Format is required';\n      }\n      return '';\n    } \n  }\n\n  /**\n   * handle textbox change register button disabled enabled.\n   */\n  const handleChange = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    let preFormData = formData;\n    preFormData[name] = value;\n    setFormData({...preFormData});\n    const error = validation(value, name);\n    let preErrorForm = errorForm;\n    if (!error) {\n      preErrorForm[name] = error;\n      setErrorForm({\n        ...preErrorForm\n      });\n    }\n    if(!error && formData.email){\n      setDisabledLoginBtn(false);\n    }else{\n      setDisabledLoginBtn(true);\n    }\n  };\n\n  const handleBlur = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    const error = validation(value, name);\n    let preErrorForm = errorForm;\n    if (error) {\n      preErrorForm[name] = error;\n      setErrorForm({\n        ...preErrorForm\n      });\n    }\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setDisabledLoginBtn(true);\n    setLoading(true);\n    if (formData) {\n      axios.post('/forget-password', formData).then(response => {\n        setDisabledLoginBtn(false);\n        setLoading(false);\n        if(response.status === 200) {\n          alert('Reset Password Link was successfully sent to your email.');\n        }\n      }).catch(error => {\n        setDisabledLoginBtn(false);\n        setLoading(false);\n        if(error.response.status === 422) {\n          alert('Email does not exist! Please try again.');\n          setFormData({email : ''});\n        }\n      })\n    } else {\n      alert('Email is wrong');\n    }\n\n    // axios.post(\"auth/login\", formData)\n    // .then((res) => {\n    //   const { data } = res;\n    //   const { token } = data.success;\n    //   const { user } = data;\n\n    //   /** store logged in user's info to local storage */\n    //   localStorage.setItem(\n    //     \"user\",\n    //     JSON.stringify({\n    //       accessToken: token,\n    //       ...user\n    //     })\n    //   );\n\n    //   /** store logged in user's info to App State */\n    //   dispatch({\n    //     type: LOGIN_SUCCESS,\n    //     payload: {\n    //       user: {\n    //         accessToken: token,\n    //         ...user\n    //       },\n    //     }\n    //   });\n    // })\n    // .then(() => navigate('/home'))\n    // .catch((error) => {\n    //   if (error.response) {\n    //     console.error(error.response.data);\n    //     // if (error.response.data.errors) {\n    //     //   this.setState({\n    //     //     errors: error.response.data.errors\n    //     //   });\n    //     // }\n    //   }\n    // });\n  }\n\n  return (\n    <Fragment>\n      <video autoPlay loop muted className={loading ? styles.backdrop + ' shadow ' + styles.videoBg : styles.videoBg}>\n        <source src='../../../login/phone_using.mp4' type='video/mp4'></source>\n      </video>\n\n      {loading && <LoadingSpinner text=\"Sending email... \" />}\n\n      <div className={loading ? styles.container + ' shadow ' + styles.backdrop : styles.container }>\n        <p className={styles.forgetPasswordTtl}>Forgot your password?</p>\n        <Form onSubmit={handleSubmit}>\n          <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n            <Form.Control\n              required\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"Email\"\n              value={formData.email}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              className={styles.formControl}\n              isValid={!errorForm.email}\n              isInvalid={errorForm.email}\n            />\n            {errorForm.email ? (\n            <span className='text-danger mt-4'>{errorForm.email}</span>) : ''}\n          </Form.Group>\n          <div className=\"d-flex justify-content-around mt-5\">\n            <Button disabled={disabledLoginBtn} type=\"submit\" className={styles.forgetBtn}>\n              Submit\n            </Button>\n          </div>\n          <div className=\"d-flex justify-content-around mt-3\">\n            <a href=\"/admin/login\" className={styles.backToLogin}>Back to Login</a>\n          </div>\n        </Form>\n      </div>\n    </Fragment>\n  )\n}\n\nexport default ForgetPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}